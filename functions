function mesos_master() {

    if [ "_$INTERFACE" = "_" ]; then echo "missing env: INTERFACE"; exit 1; fi
    if [ "_$MASTERS" = "_" ]; then echo "missing env: MASTERS"; exit 1; fi
    if [ "_$QUORUM" = "_" ]; then echo "missing env: QUORUM"; exit 1; fi

	# Create the list of zookeeper host:port configs
	for i in $MASTERS; do
		if [ "_${ZK}" != "_" ]; then
			ZK="${ZK},"
		fi
		ZK="${ZK}${i}:2181"
	done

	# Find the public IP for the selected network interface
	HOST_IP=`ifconfig $INTERFACE | grep "inet addr" | awk -F: '{print $2}' | awk '{print $1}'`

	# Build zookeeper urls for mesos and marathon
	MESOS_ZK="zk://$ZK/mesos"
	MARATHON_ZK="zk://$ZK/marathon"

	export INTERFACE
	export MASTERS
	export QUORUM
	export HOST_IP
	export MESOS_ZK
	export MARATHON_ZK

	echo "INTERFACE=$INTERFACE"
	echo "QUORUM=$QUORUM"
	echo "MASTERS=$MASTERS"
	echo "HOST_IP: $HOST_IP"
	echo "MESOS_ZK: $MESOS_ZK"
	echo "MARATHON_ZK: $MARATHON_ZK"

	cat "`dirname $0`/master.yml" | envsubst > docker-compose.yml
	echo "docker-compose.yml saved."
}
